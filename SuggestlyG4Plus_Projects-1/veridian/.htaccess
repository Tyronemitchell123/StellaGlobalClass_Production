# .htaccess for Veridian Private Concierge
# Domain redirects and URL rewriting

# Enable Rewrite Engine
RewriteEngine On

# Force HTTPS (SSL)
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Remove www (optional - uncomment if you want non-www)
# RewriteCond %{HTTP_HOST} ^www\.veridianprivate\.com [NC]
# RewriteRule ^(.*)$ https://veridianprivate.com/$1 [L,R=301]

# ============================================
# DOMAIN REDIRECTS - Merge all domains to Veridian
# ============================================

# Redirect OnTarget Couriers to Veridian Courier Section
RewriteCond %{HTTP_HOST} ^(www\.)?ontargetcouriers\.co\.uk$ [NC]
RewriteRule ^(.*)$ https://veridianprivate.com/#courier [R=301,L]

# Redirect OnTarget Web Design to Veridian Web Design Section
RewriteCond %{HTTP_HOST} ^(www\.)?ontargetwebdesign\.com$ [NC]
RewriteRule ^(.*)$ https://veridianprivate.com/#web-design [R=301,L]

# Redirect Velocities to Veridian Transportation Section
RewriteCond %{HTTP_HOST} ^(www\.)?velocities\.ltd$ [NC]
RewriteRule ^(.*)$ https://veridianprivate.com/#transportation [R=301,L]

# ============================================
# SECURITY HEADERS
# ============================================

# Prevent directory browsing
Options -Indexes

# Protect sensitive files
<FilesMatch "\.(htaccess|htpasswd|ini|log|sh|sql|md|json)$">
    Order Allow,Deny
    Deny from all
</FilesMatch>

# Protect archive directory
<IfModule mod_rewrite.c>
    RewriteRule ^_archive/ - [F,L]
</IfModule>

# ============================================
# PERFORMANCE OPTIMIZATION
# ============================================

# Enable Gzip Compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# Browser Caching
<IfModule mod_expires.c>
    ExpiresActive On

    # Images
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
    ExpiresByType image/webp "access plus 1 year"
    ExpiresByType image/x-icon "access plus 1 year"

    # CSS and JavaScript
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType text/javascript "access plus 1 month"

    # Fonts
    ExpiresByType font/woff "access plus 1 year"
    ExpiresByType font/woff2 "access plus 1 year"
    ExpiresByType application/font-woff "access plus 1 year"
    ExpiresByType application/font-woff2 "access plus 1 year"

    # HTML
    ExpiresByType text/html "access plus 1 hour"

    # Default
    ExpiresDefault "access plus 1 month"
</IfModule>

# ============================================
# ERROR PAGES (Optional - create these files)
# ============================================

# ErrorDocument 404 /404.html
# ErrorDocument 500 /500.html

# ============================================
# CORS Headers (if needed for API)
# ============================================

# <IfModule mod_headers.c>
#     Header set Access-Control-Allow-Origin "*"
#     Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
#     Header set Access-Control-Allow-Headers "Content-Type"
# </IfModule>
